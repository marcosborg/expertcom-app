<app-public-header [title]="title()" [showBack]="true"></app-public-header>

<ion-content [fullscreen]="true" color="light">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  @if (loading) {
    <div class="skeleton">
      <ion-skeleton-text animated style="width:100%; height:220px"></ion-skeleton-text>
      <ion-skeleton-text animated style="width:70%; height:18px; margin-top:12px"></ion-skeleton-text>
      <ion-skeleton-text animated style="width:90%; height:12px; margin-top:6px"></ion-skeleton-text>
    </div>
  }

  @if (error && !loading) {
    <div class="error-block">
      <p>{{ error }}</p>
      <ion-button fill="outline" size="small" (click)="load(true)">Tentar novamente</ion-button>
      <ion-button size="small" fill="clear" (click)="backToList()">Voltar</ion-button>
    </div>
  }

  @if (tour && !loading) {
    <div class="gallery-scroll">
      @for (img of images; track img) {
        <div class="image" [style.background-image]="'url(' + img + ')'"></div>
      }
    </div>
    <div class="details">
      <div class="title-row">
        <h1>{{ title() }}</h1>
        @if (tour.price) {
          <ion-chip color="dark">
            <ion-label>{{ tour.price }}</ion-label>
          </ion-chip>
        }
      </div>
      <p class="meta">{{ subtitle() || 'Experiencia personalizada' }}</p>
      <p class="description" [innerHTML]="tour.description || 'Descricao nao disponivel.'"></p>
      <ion-list>
        @if (tour.origin) {
          <ion-item>
            <ion-icon name="location-outline" slot="start"></ion-icon>
            <ion-label>Origem/rota</ion-label>
            <ion-label slot="end">{{ tour.origin }}</ion-label>
          </ion-item>
        }
        @if (tour.duration) {
          <ion-item>
            <ion-icon name="time-outline" slot="start"></ion-icon>
            <ion-label>Duracao</ion-label>
            <ion-label slot="end">{{ tour.duration }}</ion-label>
          </ion-item>
        }
      </ion-list>
      <ion-button expand="block" color="dark" (click)="backToList()">
        Voltar aos transfers/tours
        <ion-icon name="airplane-outline" slot="end"></ion-icon>
      </ion-button>
    </div>
  }
</ion-content>
