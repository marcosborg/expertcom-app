<app-public-header [title]="title()" [showBack]="true"></app-public-header>

<ion-content [fullscreen]="true" color="light">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div *ngIf="loading" class="skeleton">
    <ion-skeleton-text animated style="width:100%; height:220px"></ion-skeleton-text>
    <ion-skeleton-text animated style="width:60%; height:18px; margin-top:12px"></ion-skeleton-text>
    <ion-skeleton-text animated style="width:90%; height:12px; margin-top:6px"></ion-skeleton-text>
  </div>

  <div *ngIf="error && !loading" class="error-block">
    <p>{{ error }}</p>
    <ion-button fill="outline" size="small" (click)="load(true)">Tentar novamente</ion-button>
    <ion-button size="small" fill="clear" (click)="backToList()">Voltar</ion-button>
  </div>

  <ng-container *ngIf="car && !loading">
    <div class="gallery-scroll">
      <div class="image" *ngFor="let img of images" [style.background-image]="'url(' + img + ')' "></div>
    </div>

    <div class="details">
      <div class="title-row">
        <h1>{{ title() }}</h1>
        <ion-chip color="dark" *ngIf="car.status">
          <ion-label>{{ display(car.status) }}</ion-label>
        </ion-chip>
      </div>

      <p class="meta">{{ meta() || 'Agende a visita ao stand para saber mais.' }}</p>
      <p class="description">{{ car.description || 'Descricao nao disponivel.' }}</p>

      <ion-list>
        <ion-item *ngIf="car.fuel">
          <ion-icon name="flash-outline" slot="start"></ion-icon>
          <ion-label>Combustivel</ion-label>
          <ion-label slot="end">{{ display(car.fuel) }}</ion-label>
        </ion-item>
        <ion-item *ngIf="car.month">
          <ion-icon name="calendar-outline" slot="start"></ion-icon>
          <ion-label>Mes</ion-label>
          <ion-label slot="end">{{ display(car.month) }}</ion-label>
        </ion-item>
        <ion-item *ngIf="car.origin">
          <ion-icon name="earth-outline" slot="start"></ion-icon>
          <ion-label>Origem</ion-label>
          <ion-label slot="end">{{ display(car.origin) }}</ion-label>
        </ion-item>
        <ion-item *ngIf="car.brand || car.car_model">
          <ion-icon name="car-outline" slot="start"></ion-icon>
          <ion-label>Modelo</ion-label>
          <ion-label slot="end">{{ display(car.brand) }} {{ display(car.car_model) }}</ion-label>
        </ion-item>
      </ion-list>

      <ion-button expand="block" color="dark" (click)="backToList()">
        Voltar ao stand
      </ion-button>
    </div>
  </ng-container>
</ion-content>
